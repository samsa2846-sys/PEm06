# Passport & Audio Recognition Bot

–ì–æ—Ç–æ–≤—ã–π –∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç Telegram-–±–æ—Ç–∞ —Å –±–µ—Å—Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –≤ Yandex Cloud –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç—Ä—ë—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- üìÑ **–ü–∞—Å–ø–æ—Ä—Ç** ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–∞—Å–ø–æ—Ä—Ç–∞ –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞ –†–§
- üöó **–í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∞** ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∞–≤ (–ª–∏—Ü–µ–≤–∞—è –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω—ã)
- üìã **–ü–∞—Ç–µ–Ω—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É** ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–∞—Ç–µ–Ω—Ç–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É –¥–ª—è –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö –≥—Ä–∞–∂–¥–∞–Ω
- üé§ **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è –±–∞–Ω–∫–∞ –∏–∑ –∞—É–¥–∏–æ

## üèóÔ∏è –°–æ—Å—Ç–∞–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
PEm06/
‚îú‚îÄ‚îÄ telegram_bot.py              # –ï–¥–∏–Ω—ã–π —Ñ–∞–π–ª Telegram-–±–æ—Ç–∞ —Å –∫–Ω–æ–ø–æ—á–Ω—ã–º –º–µ–Ω—é
‚îú‚îÄ‚îÄ functions/
‚îÇ   ‚îú‚îÄ‚îÄ passport/               # Cloud Function –¥–ª—è OCR –ø–∞—Å–ø–æ—Ä—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ license/                # Cloud Function –¥–ª—è OCR –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∞–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ patent/                 # Cloud Function –¥–ª—è OCR –ø–∞—Ç–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ audio/                  # Cloud Function –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ       ‚îú‚îÄ‚îÄ index.js
‚îÇ       ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ env.example                 # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram-–±–æ—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install python-telegram-bot==13.15 requests

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ —É–∫–∞–∂–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ URL —Ñ—É–Ω–∫—Ü–∏–π
```

### 2. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python telegram_bot.py
```

### 3. –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –≤ Yandex Cloud

–î–ª—è –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`passport`, `license`, `patent`, `audio`):

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Ñ—É–Ω–∫—Ü–∏–∏:
   ```bash
   cd functions/passport  # –∏–ª–∏ license, patent, audio
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   npm install
   ```

3. –°–æ–∑–¥–∞–π—Ç–µ –∞—Ä—Ö–∏–≤:
   ```bash
   zip -r function.zip .
   ```

4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤ Yandex Cloud Functions:
   - –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é —Å Node.js 16
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ `function.zip`
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTP-—Ç—Ä–∏–≥–≥–µ—Ä
   - –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
     - `YANDEX_VISION_API_KEY` (–¥–ª—è passport, license, patent)
     - `YANDEX_SPEECHKIT_API_KEY` (–¥–ª—è audio)
     - `YANDEX_GPT_API_KEY` (–¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π)
     - `YANDEX_FOLDER_ID` (–¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π)

5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTP URL —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —É–∫–∞–∂–∏—Ç–µ –≤ `.env` –±–æ—Ç–∞

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start` –±–æ—Ç—É
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ –º–µ–Ω—é:
   - üìÑ –ü–∞—Å–ø–æ—Ä—Ç
   - üöó –í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∞
   - üìã –ü–∞—Ç–µ–Ω—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:
   - **–ü–∞—Å–ø–æ—Ä—Ç/–ü–∞—Ç–µ–Ω—Ç**: –æ–¥–Ω–æ —Ñ–æ—Ç–æ
   - **–í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∞**: –¥–≤–∞ —Ñ–æ—Ç–æ (–ª–∏—Ü–µ–≤–∞—è –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω—ã)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –±–∞–Ω–∫–∞
5. –ü–æ–ª—É—á–∏—Ç–µ –∏—Ç–æ–≥–æ–≤—ã–π JSON —Å –¥–∞–Ω–Ω—ã–º–∏

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –±–æ—Ç–∞

```env
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
PASSPORT_FUNCTION_URL=https://functions.yandexcloud.net/...
LICENSE_FUNCTION_URL=https://functions.yandexcloud.net/...
PATENT_FUNCTION_URL=https://functions.yandexcloud.net/...
AUDIO_FUNCTION_URL=https://functions.yandexcloud.net/...
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π

**–î–ª—è —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (passport, license, patent):**
- `YANDEX_VISION_API_KEY` ‚Äî –∫–ª—é—á API Yandex Vision
- `YANDEX_GPT_API_KEY` ‚Äî –∫–ª—é—á API Yandex GPT
- `YANDEX_FOLDER_ID` ‚Äî ID –ø–∞–ø–∫–∏ –≤ Yandex Cloud

**–î–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ:**
- `YANDEX_SPEECHKIT_API_KEY` ‚Äî –∫–ª—é—á API Yandex SpeechKit
- `YANDEX_GPT_API_KEY` ‚Äî –∫–ª—é—á API Yandex GPT
- `YANDEX_FOLDER_ID` ‚Äî ID –ø–∞–ø–∫–∏ –≤ Yandex Cloud

## üìä –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤

### –ü–∞—Å–ø–æ—Ä—Ç

```json
{
  "success": true,
  "last_name": "–ò–í–ê–ù–û–í",
  "first_name": "–ò–í–ê–ù",
  "middle_name": "–ò–í–ê–ù–û–í–ò–ß",
  "birth_date": "01.01.1990",
  "birth_place": "–ú–û–°–ö–í–ê",
  "passport_number": "1234567890",
  "citizenship": "–†–æ—Å—Å–∏—è"
}
```

### –í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∞

```json
{
  "success": true,
  "full_name": "–ò–í–ê–ù–û–í –ò–í–ê–ù –ò–í–ê–ù–û–í–ò–ß",
  "license_number": "9924621263"
}
```

### –ü–∞—Ç–µ–Ω—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É

```json
{
  "success": true,
  "full_name": "–¢—É–π—á–∏–µ–≤ –ú–∞—ä–¥–∏—Ö–æ–¥–∂–∞ –°–∞–π–¥—Ö–æ–¥–∂–∞–µ–≤–∏—á",
  "citizenship": "–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω",
  "document_number": "401828285"
}
```

### –ê—É–¥–∏–æ

```json
{
  "success": true,
  "bank_name": "–°–±–µ—Ä–±–∞–Ω–∫",
  "phone_number": "9015477837",
  "raw_text": "—Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç",
  "processing_info": {
    "gpt_used": true,
    "gpt_error": null,
    "fallback_used": false
  }
}
```

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Telegram Bot**: Python, python-telegram-bot 13.15
- **Cloud Functions**: Node.js 16, axios
- **Yandex Cloud Services**:
  - Vision API ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - SpeechKit ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
  - GPT API ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Yandex Cloud Functions](https://cloud.yandex.ru/docs/functions/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Yandex Vision API](https://cloud.yandex.ru/docs/vision/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Yandex SpeechKit](https://cloud.yandex.ru/docs/speechkit/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è python-telegram-bot](https://python-telegram-bot.org/)
